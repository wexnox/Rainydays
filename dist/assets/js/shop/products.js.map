{"version":3,"names":[],"mappings":"","sources":["shop/products.js"],"sourcesContent":["// import { getProducts } from \"./api.js\";\r\nconst productsContainer = document.querySelector(\".products\");\r\nconst cart = document.querySelector(\".cart\");\r\nconst cartList = document.querySelector(\".cart-list\");\r\nconst totalContainer = document.querySelector(\".total\");\r\n\r\nconst url = \"http://api.rainydays.noroff.wexox.no/wp-json/wc/store/products/\";\r\nlet cartArray = [];\r\n// let data = [];\r\nasync function getProducts() {\r\n  try {\r\n    const response = await fetch(url);\r\n    const json = await response.json();\r\n    const data = json;\r\n\r\n    data.forEach((product) => {\r\n      productsContainer.innerHTML += `\r\n        <div class=\"product\">\r\n        <a href=\"details.html?id=${product.id}\">\r\n        <h2>${product.name}</h2>\r\n         </a>\r\n            ${product.short_description}\r\n            <div style=\"background-image: url(${product.images[0].src})\" class=\"product-image\"></div>\r\n            ${product.description}\r\n            <div class=\"product-price\">${product.price_html}</div>\r\n            <button class=\"product-button\" data-product=\"${product.id}\">Add to cart</button>\r\n        </div>`;\r\n    });\r\n    const buttons = document.querySelectorAll(\"button\");\r\n    buttons.forEach(function (button) {\r\n      button.onclick = function (event) {\r\n        \r\n\r\n        const itemToAdd = data.find(\r\n          (item) => item.id === parseInt(event.target.dataset.product)\r\n        );\r\n\r\n        cartArray.push(itemToAdd);\r\n        // showCart(cartArray);\r\n        localStorage.setItem(\"cartList\", JSON.stringify(cartArray));\r\n      };\r\n    });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\ngetProducts();\r\n\r\nfunction showCart(cartItems) {\r\n  cart.style.display = \"flex\";\r\n  cartList.innerHTML = \" \";\r\n  let total = 0;\r\n  cartItems.forEach(function (cartElement) {\r\n    total += parseInt(cartElement.prices.price);\r\n    cartList.innerHTML += `\r\n            <div class=\"cart-item\">\r\n            <h4>${cartElement.name}</h4>\r\n            <div style=\"background-image: url(${cartElement.image})\" class=\"cart-image\"></div>\r\n            </div>`;\r\n  });\r\n  totalContainer.innerHTML = `Total: ${total}`;\r\n}\r\n"],"file":"shop/products.js"}