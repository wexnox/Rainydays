{"version":3,"names":[],"mappings":"","sources":["shop/products.js"],"sourcesContent":["// import { productArray } from \"/assets/js/constants/productList.js\";\r\n\r\nconst url = 'http://api.rainydays.wexox.no/wp-json/wc/store/products'\r\n\r\nconst productsContainer = document.querySelector(\".products\");\r\nconst cart = document.querySelector(\".cart\");\r\nconst cartList = document.querySelector(\".cart-list\");\r\nconst totalContainer = document.querySelector(\".total\");\r\n\r\nlet cartArray = [];\r\n\r\nasync function getProducts() {\r\n  try {\r\n    const response = await fetch(url);\r\n    const json = await response.json();\r\n    console.log(json);\r\n    productsContainer.innerHTML = \"\";\r\n\r\n    json.forEach(function(product) {\r\n      productsContainer.innerHTML += `\r\n<div class=\"product\">\r\n    <a href=\"details.html?id=${product.id}\"><h2>${product.name}</h2>\r\n        <p>${product.description}</p>\r\n         <div style=\"background-image: url(${product.images[0].src})\" class=\"product-image\"></div>\r\n    </a>\r\n   <div>  \r\n       <p>Price: </p>\r\n            <div class=\"product-price\">\r\n           ${product.prices.price}  ${product.prices.currency_symbol}\r\n            </div>\r\n   </div>\r\n   <button class=\"product-button\" data-product=\"${product.id}\">Add to cart</button>\r\n</div>\r\n`\r\n\r\n    })\r\n  } catch (error) {\r\n    console.log(error);\r\n    productsContainer.innerHTML = alert(\"error\", error);\r\n  }\r\n}\r\ngetProducts();\r\n\r\n//\r\n// productArray.forEach(function (product) {\r\n//   productsContainer.innerHTML += `\r\n//   <div class=\"product\">\r\n//\r\n//     <h2>${product.name}</h2>\r\n//     <p>${product.description}</p>\r\n//     <div style=\"background-image: url(${product.image})\" class=\"product-image\"></div>\r\n//     <div>\r\n//       <p>Price: </p>\r\n//         <div class=\"product-price\">\r\n//           ${product.price}\r\n//         </div>\r\n//     </div>\r\n//     <button class=\"product-button\" data-product=\"${product.id}\">Add to cart</button>\r\n//   </div> `;\r\n// });\r\n\r\nconst buttons = document.querySelectorAll(\"button\");\r\nbuttons.forEach(function (button) {\r\n  button.onclick = function (event) {\r\n    // cartArray.push(event.target.dataset.product);\r\n    const itemToAdd = productArray.find(\r\n      (item) => item.id === event.target.dataset.product\r\n    );\r\n    cartArray.push(itemToAdd);\r\n    showCart(cartArray);\r\n    localStorage.setItem(\"cartList\", JSON.stringify(cartArray));\r\n  };\r\n});\r\n\r\nfunction showCart(cartItems) {\r\n  cart.style.display = \"flex\";\r\n  cartList.innerHTML = \" \";\r\n  let total = 0;\r\n  cartItems.forEach(function (cartElement) {\r\n    total += cartElement.price;\r\n    cartList.innerHTML += `\r\n            <div class=\"cart-item\">\r\n            <h4>${cartElement.name}</h4>\r\n            <div style=\"background-image: url(${cartElement.image})\" class=\"cart-image\"></div>\r\n            </div>`;\r\n  });\r\n  totalContainer.innerHTML = `Total: ${total}`;\r\n}\r\n"],"file":"shop/products.js"}